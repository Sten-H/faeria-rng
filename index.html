<html>
    <head>
        <title>Rage Assistant</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="lib/tether-1.3.3/css/tether.css">
        <link rel="stylesheet" type="text/css" href="lib/bootstrap-4.0.0-alpha.6-dist/css/bootstrap.css">
        <link rel="stylesheet" type="text/css" href="lib/glyphicon-halflings/css/glyphicons.css">
        <link rel="stylesheet" type="text/css" href="main_style.css">
    </head>
    <body>
        <div class="container content rumble">
            <div class="row">
                <div class="col-md-12 offset-lg-2 col-lg-8 mt-3">
                    <header>
                        <h1 class="display-4 rumble" id="title">Rage Assistant</h1>
                        <hr class="my-0">
                        <p class="lead text-highlight">Start complaining more accurately</p>
                    </header>
                    <!-- I call javascript code call in action here to use form input checks
                         to prevent run if input is invalid and also give user feedback -->
                    <form id="chance-form" action="javascript:main.run()">
                        <div id="target-cards">
                            <!--  Labels for columns -->
                            <div class="row mb-2">
                                <div class="col-5">
                                    <span class="text-highlight"> # of cards in deck </span>
                                </div>
                                <div class="col-5">
                                    <span class="text-highlight"> # of cards needed </span>
                                </div>
                            </div>
                            <!-- This is filled with target card input fields -->
                        </div>
                        <div class="btn-group mb-2">
                            <button id="add-card-btn" class="btn btn-info">
                                Add card <span id="add-icon" class="glyphicon glyphicon-plus"></span>
                            </button>
                        </div>
                        <div class="form-group">
                            <span class="float-right text-highlight text-bold help-tooltip" data-toggle="tooltip" data-placement="left"
                                  title="All non-target cards in starting hand will be mulliganed.">?</span>
                            <label for="draw-amount">Number of draws</label>
                                <input id="draw-amount" class="form-control" type="number" min=3 max=30 value=20 placeholder="Total # of draws"required>
                        </div>
                        <!-- Advanced options -->
                        <div class="card card-outline-info mb-3">
                            <div class="card-header transparent-bg">
                                <a data-toggle="collapse" href="#option-wrapper" aria-expanded="true" aria-controls="option-wrapper">
                                    Advanced options
                                </a>
                            </div>
                            <!--  Without wrapper, collapse is laggy  -->
                            <div id="option-wrapper" class="collapse">
                                <div class="card-block">
                                    <!--  Mulligan -->
                                    <div class="form-group">
                                        <span class="float-right text-highlight text-bold help-tooltip" data-toggle="tooltip" data-placement="left"
                                              title="The simulation will perform a smarter mulligan where it willl also throw away excessive target cards.">?</span>
                                        <label class="custom-control custom-checkbox">
                                            <input type="checkbox" class="custom-control-input" id="mulligan-checkbox">
                                            <span class="custom-control-indicator"></span>
                                            <span class="custom-control-description">
                                                <img src="images/thinking.png" width=20 alt="Vohiyo maymay">
                                                Use <em>"intelligent"</em> mulligans
                                                <img src="images/thinking.png" width=20 alt="Vohiyo maymay">
                                            </span>
                                        </label>
                                    </div>
                                    <!--  Show effects -->
                                    <div class="form-group">
                                        <span class="float-right text-highlight text-bold help-tooltip" data-toggle="tooltip" data-placement="left"
                                              title="When enabled effects (eg. screen shake) will trigger on finished simulation based on how angry you should feel.">?</span>
                                        <label class="custom-control custom-checkbox">
                                            <input type="checkbox" class="custom-control-input" id="effects-checkbox" checked>
                                            <span class="custom-control-indicator"></span>
                                            <span class="custom-control-description">
                                                Show effects on finished simulation
                                            </span>
                                        </label>
                                    </div>
                                    <!-- Precision tooltip -->
                                    <span class="float-right text-highlight text-bold help-tooltip" data-toggle="tooltip" data-placement="left"
                                          title="Higher accuracy yields more reliable result, but increases wait time.">?</span>
                                    <div class="row">
                                        <!-- Precision  -->
                                        <div class="col-xl-6">
                                            <div class="form-group precision-group">
                                                <div class="btn-group" data-toggle="buttons">
                                                  <label class="btn btn-primary">
                                                    <input type="radio" name="precision" value="50000" autocomplete="off"> Fast
                                                  </label>
                                                  <label class="btn btn-primary active">
                                                    <input type="radio" name="precision" value="200000" autocomplete="off" checked> Accurate
                                                  </label>
                                                  <label class="btn btn-primary">
                                                    <input type="radio" name="precision" value="1000000" autocomplete="off"> V. Accurate
                                                  </label>
                                                </div>
                                            </div>
                                        </div>
                                        <!--  Show time taken -->
                                        <div class="offset-xl-1 col-xl-5">
                                            <div class="form-group">
                                                <label class="custom-control custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" id="time-checkbox">
                                                    <span class="custom-control-indicator"></span>
                                                    <span class="custom-control-description">
                                                        Show time taken
                                                    </span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>  <!-- End of options card -->
                        <!-- FAQ card -->
                        <div class="card card-outline-info mb-3">
                            <div class="card-header transparent-bg">
                                <a data-toggle="collapse" href="#faq-wrapper" aria-expanded="true" aria-controls="faq-wrapper">
                                    FAQ
                                </a>
                            </div>
                            <!--  Without wrapper, collapse is laggy  -->
                            <div id="faq-wrapper" class="collapse">
                                <div class="card-block">
                                    <p class="question">What is this?</p>
                                    <p class="answer">This is a tool to help <a href="https://www.faeria.com" target="_blank">Faeria</a> players more accurately be able to complain about how unlucky they are not to draw a specific card or a combination of cards.</p>

                                    <p class="question">Why can I not draw less than three cards?</p>
                                    <p class="answer">Because three cards is the minimum in any given game. It is the starting hand.</p>

                                    <p class="question">How does the mulligan work?</p>
                                    <p class="answer">For every game, the mulligan algorithm will look at the starting hand and throw away all non-target cards. If smart mulligan is used it mulligans all excessive target cards as well.</p>

                                    <p class="question">Why does calculation take so much time?</p>
                                    <p class="answer">Because the algorithm is rather crude. It simulates hundreds of thousands of separate games and looks at the total number of desired hands found. If you have a general mathematical solution (excluding mulligans even) I'm very interested!</p>

                                    <p class="question">I do have some suggestions, how can I bring attention to them?</p>
                                    <p class="answer">Make a pull request on <a href="https://github.com/Sten-H/Sten-H.github.io" target="_blank">Github</a>. Add a whacky screen effect or whatever you feel like.</p>
                                </div>
                            </div>
                        </div>  <!-- End of FAQ card -->
                        <button id="calculate-btn" class="btn btn-primary btn-block">
                            Calculate chance <span class="glyphicon glyphicon-spin"></span>
                        </button>
                    <form>
                </div>
            </div>
            <!--  Row presenting the probability results -->
            <div class="row">
                <div class="offset-lg-2 col-lg-8">
                    <div id="results-wrapper">
                        <h3>
                            Out of
                            <span class='text-highlight'>1000</span>
                            hands
                            <span class='text-highlight rumble' id='chance-number'> --- </span>
                            of them would be desired.
                        </h3>
                        <div id="time-taken-wrapper">
                            <hr class="my-1">
                            <p class="lead">Completed in
                                <span class="text-highlight" id="time-taken">---</span>
                                seconds</p>
                        </div>
                    </div>
                    <div id="error-wrapper">
                        <h4>
                            <span class="badge badge-danger">Error</span>
                            <span id="error-message">Something went very wrong</span>
                        </h4>
                    </div>
                </div>
            </div>
        </div>
        <footer class="footer">
            <div class="container-fluid">
                <div class="row">
                    <!--  Credit -->
                    <div class="col-12 offset-xl-3 col-xl-6">
                        <span class="lead">
                            <img src="images/vohiyo.png" width=32 alt="Vohiyo maymay">
                            Credit to <span class="text-highlight">pauanyu</span> for inspiration and help
                            <img src="images/vohiyo.png" width=32 alt="Vohiyo maymay">
                        </span>
                    </div>
                    <!--  Github link -->
                    <div class="col-12 offset-xl-1 col-xl-2">
                        <a href="https://github.com/Sten-H/Sten-H.github.io" target="_blank">
                            View on Github
                            <img src="images/Octocat.png" width=40 alt="Github logo">
                        </a>
                    </div>
                </div>
            </div>
        </footer>
        <script src="lib/jquery-3.1.1.js"></script>
        <script src="lib/jrumble-1.3/jquery.jrumble.1.3.js"></script>
        <script src="lib/tether-1.3.3/js/tether.js"></script>
        <script src="lib/bootstrap-4.0.0-alpha.6-dist/js/bootstrap.js"></script>
        <script src="probability.js"></script>
        <script src="main.js"></script>
    </body>
</html>
